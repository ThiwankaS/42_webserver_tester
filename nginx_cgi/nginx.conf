server {
    listen 80; 
    server_name localhost;

    # Root maps to your 'www' folder
    root /usr/share/nginx/html;

    # Matches JSON: client_max_body_size 1048576
    client_max_body_size 1M;

    # Matches JSON: autoindex false
    autoindex off;

    # Status Pages
    error_page 400 /errors/400.html;
    error_page 403 /errors/403.html;
    error_page 404 /errors/404.html;
    error_page 413 /errors/413.html;
    error_page 500 /errors/500.html;

    # Route: /
    location / {
        limit_except GET POST {
            deny all;
        }
        index index.html;
    }

    # Route: cgi-bin
    location /cgi-bin/ {
        # Ensure only GET/POST as per your common allowed_methods
        limit_except GET POST DELETE {
            deny all;
        }
        root /usr/share/nginx;
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        include fastcgi_params;
        # Essential for Ubuntu-based fcgiwrap
        fastcgi_param SCRIPT_FILENAME /usr/share/nginx$fastcgi_script_name;
    }

    # Custom handling for the tester's .bla files if needed
    location ~ \.bla$ {
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /usr/share/nginx/html/cgi-bin/cgi_test;
    }
}